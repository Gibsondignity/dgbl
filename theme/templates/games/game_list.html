{% extends 'games/base.html' %}
{% load static %}
{% block title %}STEM Games{% endblock %}

{% block content %}
<div class="max-w-6xl w-full mx-auto px-4">
  <h2 class="text-3xl font-extrabold text-center text-blue-700 mb-10 animate-pulse">🎮 Choose a STEM Game 🎮</h2>

  {% if not category %}
  <!-- Category Selection -->
  <div class="grid grid-cols-2 sm:grid-cols-4 gap-6">
    <a href="{% url 'quiz_list' %}?category=quiz" class="bg-yellow-100 hover:bg-yellow-200 p-6 rounded-2xl text-center shadow-md transition">
      <p class="text-4xl">❓</p>
      <h3 class="text-xl font-bold text-yellow-700">Quiz</h3>
    </a>
    <a href="{% url 'spelling_game' %}?spelling_game=spelling" class="bg-green-100 hover:bg-green-200 p-6 rounded-2xl text-center shadow-md transition">
      <p class="text-4xl">📝</p>
      <h3 class="text-xl font-bold text-green-700">Spelling</h3>
    </a>
    <a href="{% url 'matching_game' %}?matching_game=matching" class="bg-purple-100 hover:bg-purple-200 p-6 rounded-2xl text-center shadow-md transition">
      <p class="text-4xl">🧠</p>
      <h3 class="text-xl font-bold text-purple-700">Matching</h3>
    </a>
    <a href="{% url 'puzzle_game' %}?category=puzzle" class="bg-pink-100 hover:bg-pink-200 p-6 rounded-2xl text-center shadow-md transition">
      <p class="text-4xl">🧩</p>
      <h3 class="text-xl font-bold text-pink-700">Puzzle</h3>
    </a>
  </div>

  {% elif games %}
  <!-- Game List by Category and Level -->
  <div class="text-left my-6">
    <a href="{% url 'games:list' %}?category={{ category }}" class="text-blue-500 hover:underline">← Back to Levels</a>
  </div>
  <div class="text-center mb-6">
    <h3 class="text-2xl font-bold text-purple-700">{{ category|title }} Games - {{ level_name }}</h3>
  </div>
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">
    {% for game in games %}
    <a href="{% url 'games:detail' game.id %}?level={{ level_id }}" class="transform hover:scale-105 transition duration-300 bg-white p-4 rounded-2xl shadow-md hover:shadow-xl border border-blue-100 hover:border-pink-300">
      <img src="{{ game.thumbnail.url }}" alt="{{ game.title }}" class="w-full h-40 object-cover rounded-xl mb-3 ring-2 ring-blue-300 hover:ring-pink-300 transition duration-300">
      <h3 class="text-xl font-bold text-pink-600 mb-1">{{ game.title }}</h3>
      <p class="text-sm text-gray-700">{{ game.description|truncatewords:15 }}</p>
      <div class="mt-2">
        <span class="inline-block bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full">{{ game.level.name }}</span>
      </div>
    </a>
    {% endfor %}
  </div>
  {% else %}
  <p class="text-center text-gray-600 text-lg mt-12">🚧 No games available in this category yet.</p>
  {% endif %}
</div>
{% endblock %}
